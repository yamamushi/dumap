#Deny directory listings.
Options -Indexes
IndexIgnore *.zip *.css *.js *.txt *.png *.ico *.jpg assets images

#Content security policy
Header set Content-Security-Policy "script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com"

<IfModule mod_rewrite.c>
    # Redirect angular pseudo-addresse to index with 200 response
    # Redirect addresses without dot and not pointing to an
    # actual file. E.g. talents/edit
    RewriteEngine On
    RewriteCond %{SCRIPT_FILENAME} !-f
    RewriteRule ^([a-z0-9/]*)$ index.html [L]

    <If "%{HTTPS} != 'on'">
        # Redirect main pages to HTTPS. Preparation for PWAs
        RewriteRule ^[a-z0-9/]+$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301,NE]
    </If>
</IfModule>

# Content caching, tuned for an Angular application
# BEGIN Expire headers
<ifModule mod_expires.c>  
        ExpiresActive On  
        ExpiresDefault "access plus 3600 seconds"  
        ExpiresByType application/font-woff2 "access plus 2592000 seconds"
        ExpiresByType image/x-icon "access plus 2592000 seconds"  
        ExpiresByType image/jpeg "access plus 604800 seconds"  
        ExpiresByType image/png "access plus 604800 seconds"  
        ExpiresByType image/gif "access plus 604800 seconds"  
        ExpiresByType image/svg+xml "access plus 604800 seconds"
        ExpiresByType text/css "access plus 604800 seconds"  
        ExpiresByType text/javascript "access plus 604800 seconds"  
        ExpiresByType application/javascript "access plus 2592000 seconds"  
        ExpiresByType application/x-javascript "access plus 2592000 seconds"  
        ExpiresByType text/html "access plus 14400 seconds"  
</ifModule>  
# END Expire headers  
